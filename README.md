# MTProto Proxy Server

MTProto Proxy - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ö–æ–¥–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Telegram, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±—ã—Å—Ç—Ä—É—é –∏ –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Å–≤—è–∑—å —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏ Telegram –¥–∞–∂–µ –≤ —É—Å–ª–æ–≤–∏—è—Ö —Ü–µ–Ω–∑—É—Ä—ã –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

MTProto Proxy —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º Telegram –∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ Telegram. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª MTProto, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Telegram, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –û–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ Telegram
- –ó–∞—â–∏—Ç–∞ –æ—Ç DPI-–∞–Ω–∞–ª–∏–∑–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- VPS –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä —Å –¥–æ—Å—Ç—É–ø–æ–º –ø–æ SSH
- –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: Debian, Ubuntu –∏–ª–∏ CentOS
- Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü—Ä–æ—â–µ, —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è 95% —Å–ª—É—á–∞–µ–≤.

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
# –î–ª—è Debian/Ubuntu
curl -fsSL https://get.docker.com | sh

# –î–ª—è CentOS/RHEL
curl -fsSL https://get.docker.com | sh && systemctl enable --now docker
```

#### –®–∞–≥ 2: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–π —Å–µ–∫—Ä–µ—Ç (32 hex-—Å–∏–º–≤–æ–ª–∞)

```bash
openssl rand -hex 16
# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞: a3f8c1d9e7b245068912ab34cd56ef78
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Å–µ–∫—Ä–µ—Ç ‚Äî –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ —à–∞–≥–µ 3 –∏ –¥–ª—è —Å—Å—ã–ª–∫–∏ –≤ Telegram.

#### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–∫—Å–∏

```bash
docker run -d \
  --name mtproto-proxy \
  --restart=unless-stopped \
  -p 443:443 \
  -e SECRET=$(openssl rand -hex 16) \
  telegrammessenger/proxy:latest
```

> üí° **–í–∞–∂–Ω–æ:** –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –Ω–∞ –ø–æ—Ä—Ç—É **443**. –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, AmneziaVPN), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 2 –Ω–∏–∂–µ.

#### –®–∞–≥ 4: –ü–æ–ª—É—á–∏—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
docker logs mtproto-proxy 2>&1 | grep -oP 'tg://proxy\?server=[^ ]+'
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
tg://proxy?server=185.170.123.45&port=443&secret=b7e8c1d9e7b245068912ab34cd56ef12
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ –≤ Telegram ‚Üí –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è¬ª.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–∫—Å–∏ —Å –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–µ–π –ø–æ—Ä—Ç–æ–≤ (–∫–æ–≥–¥–∞ –ø–æ—Ä—Ç 443 –∑–∞–Ω—è—Ç)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç, –µ—Å–ª–∏ –ø–æ—Ä—Ç 443 –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, Amnezia VPN).

#### –®–∞–≥ 1: –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–µ—Å–ª–∏ –±—ã–ª–∏)

```bash
docker rm -f mtproto-proxy
```

#### –®–∞–≥ 2: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç

```bash
SECRET=$(head -c 16 /dev/urandom | xxd -ps)
echo "–í–∞—à —Å–µ–∫—Ä–µ—Ç: $SECRET"
```

#### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–∫—Å–∏ –Ω–∞ –ø–æ—Ä—Ç—É 8443

```bash
docker run -d \
  --name mtproto-proxy \
  --restart=unless-stopped \
  -p 8443:443 \
  -e SECRET=$SECRET \
  -e WORKERS=1 \
  telegrammessenger/proxy:latest
```

#### –®–∞–≥ 4: –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç –≤ firewall

```bash
# –î–ª—è iptables
iptables -I INPUT -p tcp --dport 8443 -j ACCEPT

# –î–ª—è UFW
ufw allow 8443/tcp
```

#### –®–∞–≥ 5: –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É

```bash
# –ü–æ–ª—É—á–∞–µ–º IP –∏ –°–µ–∫—Ä–µ—Ç
PUBLIC_IP=$(curl -s https://api.ipify.org)
MY_SECRET=$(docker exec mtproto-proxy cat /data/proxy-secret)

echo ""
echo "========================================="
echo "‚úÖ –í–ê–®–ê –°–°–´–õ–ö–ê (–° –∑–∞—â–∏—Ç–æ–π –æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫):"
echo "========================================="
echo "tg://proxy?server=${PUBLIC_IP}&port=8443&secret=dd${MY_SECRET}"
echo "========================================="
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–∫—Å–∏ —Å FakeTLS (–º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥ HTTPS)

–ù—É–∂–µ–Ω –µ—Å–ª–∏:
- –ü–æ—Ä—Ç 443 –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, AmneziaVPN)
- –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—Ö–æ–¥ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —á–µ—Ä–µ–∑ –º–∞—Å–∫–∏—Ä–æ–≤–∫—É –ø–æ–¥ –ª–µ–≥–∏—Ç–∏–º–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

```bash
mkdir -p ~/mtproto-proxy && cd ~/mtproto-proxy

cat > config.py << 'EOF'
PORT = 443
USERS = {
    "user1": "b7e8c1d9e7b245068912ab34cd56ef12"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π —Å–µ–∫—Ä–µ—Ç (32 hex —Å–∏–º–≤–æ–ª–∞)
}
TLS_DOMAIN = "www.google.com"  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å www.
EOF
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –°–µ–∫—Ä–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Ä–æ–≤–Ω–æ 32 —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã—Ö —Å–∏–º–≤–æ–ª–∞** (—Ü–∏—Ñ—Ä—ã 0-9, –±—É–∫–≤—ã a-f). –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å `ee` –≤ –∫–æ–Ω—Ñ–∏–≥–µ!

#### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–∫—Å–∏ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–º –ø–æ—Ä—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 8443)

```bash
docker run -d \
  --name mtproto-proxy \
  --restart=unless-stopped \
  -p 8443:443 \
  -v ~/mtproto-proxy/config.py:/home/tgproxy/config.py:ro \
  alexbers/mtprotoproxy
```

#### –®–∞–≥ 3: –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è Telegram –≤—Ä—É—á–Ω—É—é

```
tg://proxy?server=–í–ê–®_IP&port=8443&secret=ee–í–ê–®_–°–ï–ö–†–ï–¢_32_–°–ò–ú–í–û–õ–ê7777772e676f6f676c652e636f6d
```

–ì–¥–µ:
- `ee` ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è FakeTLS
- `–í–ê–®_–°–ï–ö–†–ï–¢_32_–°–ò–ú–í–û–õ–ê` ‚Äî –≤–∞—à —Å–µ–∫—Ä–µ—Ç –∏–∑ `config.py` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- `7777772e676f6f676c652e636f6d` ‚Äî hex-–∫–æ–¥ –¥–æ–º–µ–Ω–∞ `www.google.com` (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —á–∞—Å—Ç—å)

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

| –°–∏–º–ø—Ç–æ–º | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|---------|---------|---------|
| `Bad secret` –≤ –ª–æ–≥–∞—Ö | –°–µ–∫—Ä–µ—Ç ‚â† 32 —Å–∏–º–≤–æ–ª–∞ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç `ee` | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–æ–≤–Ω–æ 32 hex-—Å–∏–º–≤–æ–ª–∞ –ë–ï–ó –ø—Ä–µ—Ñ–∏–∫—Å–∞ |
| –ü–æ—Ä—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç | –§–∞–µ—Ä–≤–æ–ª/–ø—Ä–æ–≤–∞–π–¥–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç | –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç: `ufw allow 443/tcp` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 8443 |
| –°—Ç–∞—Ç—É—Å ¬´–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω¬ª –≤ Telegram | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏ | –î–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ ‚Äî –±–µ–∑ `ee`; –¥–ª—è FakeTLS ‚Äî —Å `ee` + hex-–¥–æ–º–µ–Ω |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∞–¥–∞–µ—Ç —Å—Ä–∞–∑—É | –ü–æ—Ä—Ç 443 –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–æ–º | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 2 —Å –ø–æ—Ä—Ç–æ–º 8443 |

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –í–∞—Ä–∏–∞–Ω—Ç–∞ 1** ‚Äî –æ–Ω –ø—Ä–æ—â–µ –∏ –Ω–∞–¥—ë–∂–Ω–µ–µ.
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 2** —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
   - –ü–æ—Ä—Ç 443 –∑–∞–Ω—è—Ç
   - –ù—É–∂–Ω–∞ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥ HTTPS (—Ä–µ–¥–∫–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤ 2026 –≥–æ–¥—É)
3. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `ee` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞** ‚Äî —Ç–æ–ª—å–∫–æ –≤ —Å—Å—ã–ª–∫—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–∫—Å–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ Docker-–æ–±—Ä–∞–∑—ã
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∞–Ω–æ–º–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º —á–µ—Ä–µ–∑ —Ñ–∞–µ—Ä–≤–æ–ª

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ –æ—à–∏–±–∫—É –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ Issue –∏–ª–∏ Pull Request.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –≤—ã—à–µ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –ø–æ–º–æ—â—å—é –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É.
